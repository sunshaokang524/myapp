import { createVNode as _createVNode, mergeProps as _mergeProps } from "vue";
import { defineComponent, Teleport, Transition } from "vue";
import { props } from "./props.mjs";
import { useLock } from "../context/lock.mjs";
import { useZIndex } from "../context/zIndex.mjs";
import { createNamespace, useTeleport } from "../utils/components.mjs";
import { call } from "@varlet/shared";


const {
  name,
  n
} = createNamespace("overlay");
var stdin_default = defineComponent({
  name,
  inheritAttrs: false,
  props,
  setup(props2, {
    slots,
    attrs
  }) {
    const {
      zIndex
    } = useZIndex(() => props2.show, 1);
    const {
      disabled
    } = useTeleport();
    useLock(() => props2.show, () => props2.lockScroll);
    function handleClickOverlay() {
      call(props2.onClick);
      call(props2["onUpdate:show"], false);
    }
    function renderOverlay() {
      return _createVNode("div", _mergeProps({
        "class": n(),
        "style": {
          zIndex: zIndex.value - 1
        }
      }, attrs, {
        "onClick": handleClickOverlay
      }), [call(slots.default)]);
    }
    function renderTransitionOverlay() {
      return _createVNode(Transition, {
        "name": n("--fade")
      }, {
        default: () => [props2.show && renderOverlay()]
      });
    }
    return () => {
      const {
        teleport
      } = props2;
      if (teleport) {
        return _createVNode(Teleport, {
          "to": teleport,
          "disabled": disabled.value
        }, {
          default: () => [renderTransitionOverlay()]
        });
      }
      return renderTransitionOverlay();
    };
  }
});
export {
  stdin_default as default
};
